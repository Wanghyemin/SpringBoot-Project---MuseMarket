<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#7952b3">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <title>Muse-Market</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href=" css/prettyPhoto.css" rel="stylesheet">
    <link href=" css/price-range.css" rel="stylesheet">
    <link href=" css/animate.css" rel="stylesheet">
	<link href=" css/main.css" rel="stylesheet">
	<link href=" css/responsive.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href=" images/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57-precomposed.png">
<title>Muse-Market</title>


<!-- Bootstrap CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  
    <!-- Bootstrap core CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- Favicons -->
<link rel="apple-touch-icon" href="/docs/5.0/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/docs/5.0/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/docs/5.0/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/docs/5.0/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="/docs/5.0/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
<link rel="icon" href="/docs/5.0/assets/img/favicons/favicon.ico">

<!-- 헤더 푸터 -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/prettyPhoto.css" rel="stylesheet">
    <link href="css/price-range.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
	<link href="css/main.css" rel="stylesheet">
	<link href="css/responsive.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="images/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57-precomposed.png">



    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    
        <!-- Custom styles for this template -->
    <link href="form-validation.css" rel="stylesheet">
      
<script type="text/javascript" src="js/util.js"></script>
<script>
   
function modifyMember() {    
	
	//alert("회원정보 수정 전")	
	
    var userId = $("#userId").val();
    var userName = $("#userName").val();
    var userPwd = $("#userPwd").val();
    var userEmail = $("#userEmail").val();
    var userAddr = $("#userAddr").val();
    var userGender = $('input[name="userGender"]:checked').val();
    var userBirth = $("#userBirth").val();
    var userTel = $("#userTel").val();
    
    var param = {"userId":userId, "userPwd":userPwd, "userName":userName,
		    		"userEmail":userEmail,
		        	"userAddr":userAddr,
		        	"userGender":userGender,
		        	"userBirth":userBirth,
		        	"userTel":userTel	
		        }
    
    if(userPwd == '') {
        alert("비밀번호를 올바르게 입력해주세요.");
    } else {
        $.ajax({
        	type:"PUT",
            anyne:true,
            method: "POST",
            data: JSON.stringify(param),
            url:"/mypage_updated_ok.action",
            dataType: "text",
            contentType: "application/json; charset=UTF-8",
            	success : function(data) {    
                alert("정보가 수정되었습니다.");
                location.href="/mypage.action";
            },            
            error: function(jqXHR, textStatus, errorThrown) {
                alert("회원정보 수정 실패 : " + textStatus + " : " + errorThrown);
            }        
        })
    }
     
}

</script>

</head>
 <body>
    
 	<!-- 헤더 : header -->
	<div th:replace="~{common/header :: headerFragment}"></div>
	  
<div class="container" style="margin-left: 500px;">
	    <h2>Update your account</h2>
	    <br/>
  <main>

<div>
	    
	    <div id="wrapper">
	  	<div class="container">
		  
		  
		  <!-- Nav tabs -->
		  <ul class="nav nav-tabs" role="tablist">
		    <li class="nav-item">
		      <a class="nav-link active" data-toggle="tab" href="#home" style="color: black;">개인 정보 변경</a>
		    </li><!-- 		 
		   
		  </ul>
		
		  <!-- Tab panes -->
		  <div class="tab-content">
		    <div id="home" class="container tab-pane active"><br>

		    <!-- 정보 수정 -->
		   		<div class="row g-5">
			 		<div class="col-md-7 col-lg-8">			 		
						<form th:action="@{mypage_updated.action}" method="post">
							<div class="col-12">
				              <label for="userId" class="form-label">ID</label>
								<input type="text" name="userId" class="form-control" id="userId" th:value="${session.login.userId}" readonly="readonly">
				              <div class="invalid-feedback">
				                아이디 고정
				              </div>
				            </div>
				            
				            <div class="col-12">
				              <label for="userName" class="form-label">Name</label>
				              <div class="input-group has-validation">
				                <input type="text" class="form-control" id="userName" name="userName"  th:value="${session.login.userName}" >
				              <div class="invalid-feedback">
				                  이름을 정확히 입력하세요.
				                </div>
				              </div>
				            </div>
				            
				            <div class="col-12">
				              <label for="userPwd" class="form-label">Password <span class="text-muted"></span></label>
					    		<input type="text" class="form-control" name="userPwd" id="userPwd" th:value="${session.login.userPwd}">
				              <div class="invalid-feedback">
				                비밀번호를 입력하세요.
				              </div>
				            </div>
				            
				            <div class="col-12">
				              <label for="userEmail" class="form-label">Email <span class="text-muted"></span></label>
					    		<input type="text" class="form-control" id="userEmail" name="userEmail" th:value="${session.login.userEmail}" >
				              <div class="invalid-feedback">
				                올바른 이메일을 입력하세요.
				              </div>
				            </div>
				            
				           <div class="col-12">
				              <label for="userBirth" class="form-label">Birth <span class="text-muted"></span></label>
              					<input type="text" class="form-control" id="userBirth" th:value="${userBirth}"  readonly="readonly">				
				            </div>
				            
				            
				            <div class="col-12">
				              <label for="userAddr" class="form-label">Address</label>
					    		<input type="text" class="form-control" id="userAddr" th:value="${session.login.userAddr}" placeholder="1234 Main St" required>
				              <div class="invalid-feedback">
				                올바른 주소지를 입력하세요.
				              </div>
				            </div>
				            
				            <div class="col-12">
				              <label for="userTel" class="form-label">Tel</label>
					    		<input type="text" class="form-control" id="userTel" th:value="${session.login.userTel}" placeholder="01012345678" required>
				              <div class="invalid-feedback">
				                올바른 연락처를 입력하세요.
				              </div>
				            </div>
				            
				           <div class="col-12">
				              <label for="userTel" class="form-label">성별</label>
						    <!-- 남자 <input type="radio" style="width:20px;" name="userGender" id="userGender" checked th:value="${session.login.userGender}" readonly="readonly">
						    여자 <input type="radio" style="width:20px;" name="userGender" id="userGender" th:value="${session.login.userGender}" readonly="readonly"> -->
						    남자 <input type="radio" style="width:20px;" name="userGender" id="userGender" value="남자" 
						    th:checked="${session.login.userGender}=='남자'">
						    여자 <input type="radio" style="width:20px;" name="userGender" id="userGender1" value="여자" 
						    th:checked="${session.login.userGender}=='여자'">
						   </div>
				            
				            
				            <hr class="my-4">

				          <div class="form-check">
				            <input type="checkbox" class="form-check-input" id="same-address">
				            <label class="form-check-label" for="same-address">광고성 이메일 수신 동의</label>
				          </div>
				
				          <hr class="my-4">      
				         			    	
			    		</form>
			    		
		    	</div>
		  </div>
		  
		   <!-- ! 정보 수정 -->

		  </div>
		  		   
		  
		</div>
	
	    </div>
	    
	 </div>
	 <!--내비바 끝  -->	 
	 
		<div class="container">
			<div class="row">
				<div class="col-sm-4 col-sm-offset-1">
					<div class="login-form"><!--login form-->						
						<form action="#">				
							
							<div style="width: 84px; height: 1px; padding-top: 1px; margin-left: 150px;">
								<button type="button" value=" Login " class="btn btn-default"
								onclick="modifyMember();">수정완료</button>
							</div>
							<div align="right" style="padding-right: 25px; margin-left: 300px;">
								<button type="button" value=" Sign Up " class="btn btn-default"
								onclick="javascript:location.href='/mypage.action';">수정 취소</button>	
							</div>
							<br/>							
						</form>
					</div><!--/login form-->
				</div>
			</div>
		</div>	
    
  </main>

</div>
<div><br/></div>
	<!-- 푸터 : footer -->
	<div th:replace="~{common/footer :: footer}"></div>
  
    <script src=" js/jquery.js"></script>
	<script src=" js/bootstrap.min.js"></script>
	<script src=" js/jquery.scrollUp.min.js"></script>
	<script src=" js/price-range.js"></script>
    <script src=" js/jquery.prettyPhoto.js"></script>
    <script src=" js/main.js"></script>
    
</body>
</html>